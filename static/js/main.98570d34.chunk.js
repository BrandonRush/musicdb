(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a(45)},20:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),c=a.n(s),o=(a(20),a(1)),l=(a(21),a(2)),i=a.n(l),u=a(4),m=a(6),d=function(e,t){switch(t.type){case"FETCH_INIT":return Object(m.a)({},e,{isLoading:!0,isError:!1});case"FETCH_FAIL":return Object(m.a)({},e,{isLoading:!1,isError:!0});case"FETCH_SUCCESS":return Object(m.a)({},e,{data:t.payload,isLoading:!1,isError:!1});default:throw console.log(e,t),new Error}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",r=Object(n.useState)(e),s=Object(o.a)(r,2),c=s[0],l=s[1],m=Object(n.useReducer)(d,{data:t,isLoading:!0,isError:!1}),g=Object(o.a)(m,2),p=g[0],b=g[1];return Object(n.useEffect)(function(){var e=new AbortController;return c&&function(){var t=Object(u.a)(i.a.mark(function t(){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b({type:"FETCH_INIT"}),t.prev=1,t.next=4,fetch(c,{signal:e.signal});case 4:n=t.sent,t.t0=a,t.next="json"===t.t0?8:"text"===t.t0?12:"blob"===t.t0?16:20;break;case 8:return t.next=10,n.json();case 10:return r=t.sent,t.abrupt("break",25);case 12:return t.next=14,n.text();case 14:return r=t.sent,t.abrupt("break",25);case 16:return t.next=18,n.blob();case 18:return r=t.sent,t.abrupt("break",25);case 20:return console.log("default triggered"),t.next=23,n.json();case 23:return r=t.sent,t.abrupt("break",25);case 25:console.log("useApi: got response"),b({type:"FETCH_SUCCESS",payload:r}),t.next=39;break;case 29:if(t.prev=29,t.t1=t.catch(1),b({type:"FETCH_FAIL"}),"AbortError"!==t.t1.name){t.next=37;break}console.log(t.t1),console.log("useApi: caught abort"),t.next=39;break;case 37:throw console.log(t.t1),t.t1;case 39:case"end":return t.stop()}},t,null,[[1,29]])}));return function(){return t.apply(this,arguments)}}()(),function(){console.log("useApi: unmounting"),e.abort()}},[a,c]),[p,l]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(n.useState)(e),a=Object(o.a)(t,2),r=a[0],s=a[1],c=g(),l=Object(o.a)(c,2),i=l[0],u=l[1],m="https://musicbrainz.org/ws/2/";return Object(n.useEffect)(function(){var e=new URLSearchParams;e.append("fmt","json");r&&function(){switch(r.type){case"album":e.append("inc","artists+releases+genres"),u(m+"release-group/".concat(r.id,"?")+e);break;case"artist":u(m+"artist/".concat(r.id,"?")+e);break;case"release":e.append("inc","collections+labels+recordings+url-rels+genres+artist-rels+mediums"),u(m+"release/".concat(r.id,"?")+e);break;case"cover":u("https://coverartarchive.org/release-group/"+r.id);break;default:throw console.log("useEntity: Errored!",r),new Error}}()&&console.log("CALLED LOADENTITY")},[r,u]),[i,u,s]},b=g,f=a(12),E=a.n(f),v=a(13),h=a.n(v),w="https://coverartarchive.org/release-group/";function j(e){var t=e.album,a=b(),s=Object(o.a)(a,2),c=s[0],l=s[1],i=p(),u=Object(o.a)(i,3),m=u[0],d=u[1],g=u[2],f=h()(t["first-release-date"]).format("MMMM DD, YYYY"),v=t["artist-credit"][0],j=t.genres,y=t.releases.find(function(e){return"US"===e.country&&"Official"===e.status}).id||t.releases.find(function(e){return"Official"===e.status}).id;return Object(n.useEffect)(function(){l(w+t.id),g({type:"release",id:y}),c.isLoading||c.isError||(document.body.style.backgroundImage="url("+c.data.images[0].image+")")},[t.id,t.releases,c,m,y,l,g,d]),console.log(m),console.log("album",t),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement("title",null,v.name," - ",t.title)),r.a.createElement("div",{className:"row cardcont nopadding"},r.a.createElement("div",{className:"poster-container nopadding col-md-5"},!c.isError&&!c.isLoading&&r.a.createElement("img",{id:"postertest",alt:"covert art",className:"poster",src:c.data.images[0].image})),r.a.createElement("div",{className:"meta-data-container col-md-7"},r.a.createElement("h1",{id:"title"},t.title),r.a.createElement("span",{className:"tagline"},v.name),r.a.createElement("p",null,f),r.a.createElement("div",{className:"additional-details"},r.a.createElement("span",{className:"genre-list"},j.map(function(e){return e.name.toUpperCase()}).join(", ")),r.a.createElement("br",null),r.a.createElement("div",{className:"row nopadding release-details mb-2"},r.a.createElement("div",{className:"col"},"Original Release:",r.a.createElement("span",{className:"meta-data"},f)),r.a.createElement("div",{className:"col"},"Running Time:",r.a.createElement("span",{className:"meta-data"},!m.isLoading&&O(m.data.media[0].tracks.reduce(function(e,t){return e+t.length},0))," ","mins")))))),r.a.createElement("div",{className:"row cardcont"},r.a.createElement("div",{className:"meta-data-container col"},!m.isLoading&&m.data.media[0].tracks.map(function(e,t){return r.a.createElement("div",{key:t,className:"row justify-content-between mb-3 align-items-baseline"},r.a.createElement("span",{className:"meta-data col-lg-8"},t+1+". "+e.title),r.a.createElement("span",{className:"col-lg-4 text-right"},O(e.length)))}))))}function O(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return t+":"+(a<10?"0":"")+a}var y=a(14),x=a.n(y),N=function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://musicbrainz.org/ws/2/release-group/?query=releasegroup:".concat(t,"&fmt=json&limit=10"));case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,console.log(n["release-groups"]),e.abrupt("return",n["release-groups"].filter(function(e){return void 0===e["secondary-types"]&&"Release"!==e.title}));case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),k=function(e){return e.title},S=function(e){var t=e.title,a=e["artist-credit"];return r.a.createElement("div",{className:"search-row"},r.a.createElement("span",{id:"title"},t)," ",r.a.createElement("span",{id:"artist"},a[0].name||a[0].artist.name))};function L(e){var t=e.setAlbum,a=Object(n.useState)(""),s=Object(o.a)(a,2),c=s[0],l=s[1],m=Object(n.useState)([]),d=Object(o.a)(m,2),g=d[0],p=d[1],b=function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.value,e.prev=1,e.next=4,N(a);case 4:n=e.sent,p(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),f={placeholder:"Search for music...",value:c,onChange:function(e,t){var a=t.newValue;l(a)}};return r.a.createElement("div",{className:"col-xs-12 search-container nopadding "},r.a.createElement("div",{className:"row align-items-baseline"},r.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-5"},r.a.createElement("a",{title:"ReactJS MusicBrainz Music Search"},r.a.createElement("span",{className:"logo"},"musicdb"))),r.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-7"},r.a.createElement(x.a,{className:"searchbox__input typeahead form-control",suggestions:g,onSuggestionsFetchRequested:b,onSuggestionsClearRequested:function(){p([])},onSuggestionSelected:function(e,a){var n=a.suggestion;a.suggestionValue,a.suggestionIndex,a.sectionIndex,a.method;t({type:"album",id:n.id})},getSuggestionValue:k,renderSuggestion:S,inputProps:f}))))}a(44);var C="https://musicbrainz.org/ws/2/";Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(function(){var e=Object(n.useState)({type:"album",id:"2a0981fb-9593-3019-864b-ce934d97a16e"}),t=Object(o.a)(e,2),a=t[0],s=t[1],c=b(),l=Object(o.a)(c,2),i=l[0],u=l[1],m=b(),d=Object(o.a)(m,2);return d[0],d[1],Object(n.useEffect)(function(){var e=new URLSearchParams;switch(e.append("fmt","json"),a.type){case"album":e.append("inc","artists+releases+genres"),u(C+"release-group/".concat(a.id,"?")+e);break;case"artist":u(C+"artist/".concat(a.id,"?")+e);break;default:throw new Error}},[a.id,a.type,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{setAlbum:s}),i.isLoading?r.a.createElement("p",{style:{color:"blue"}},"Loading..."):i.isError?r.a.createElement("p",{style:{color:"red"}},"Errored!"):r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{album:i.data})))},null),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.98570d34.chunk.js.map