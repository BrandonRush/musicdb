(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,a,t){e.exports=t(45)},20:function(e,a,t){},44:function(e,a,t){},45:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(10),c=t.n(s),o=(t(20),t(1)),l=(t(21),t(7)),i=t.n(l),u=t(11),m=t(4),d=function(e,a){switch(a.type){case"FETCH_INIT":return Object(m.a)({},e,{isLoading:!0,isError:!1});case"FETCH_FAIL":return Object(m.a)({},e,{isLoading:!1,isError:!0});case"FETCH_SUCCESS":return Object(m.a)({},e,{data:a.payload,isLoading:!1,isError:!1});default:throw console.log(e,a),new Error}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",r=Object(n.useState)(e),s=Object(o.a)(r,2),c=s[0],l=s[1],m=Object(n.useReducer)(d,{data:a,isLoading:!0,isError:!1}),g=Object(o.a)(m,2),p=g[0],b=g[1];return Object(n.useEffect)(function(){var e=new AbortController;return c&&function(){var a=Object(u.a)(i.a.mark(function a(){var n,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b({type:"FETCH_INIT"}),a.prev=1,a.next=4,fetch(c,{signal:e.signal});case 4:n=a.sent,a.t0=t,a.next="json"===a.t0?8:"text"===a.t0?12:"blob"===a.t0?16:20;break;case 8:return a.next=10,n.json();case 10:return r=a.sent,a.abrupt("break",25);case 12:return a.next=14,n.text();case 14:return r=a.sent,a.abrupt("break",25);case 16:return a.next=18,n.blob();case 18:return r=a.sent,a.abrupt("break",25);case 20:return console.log("default triggered"),a.next=23,n.json();case 23:return r=a.sent,a.abrupt("break",25);case 25:console.log("useApi: got response"),b({type:"FETCH_SUCCESS",payload:r}),a.next=39;break;case 29:if(a.prev=29,a.t1=a.catch(1),b({type:"FETCH_FAIL"}),"AbortError"!==a.t1.name){a.next=37;break}console.log(a.t1),console.log("useApi: caught abort"),a.next=39;break;case 37:throw console.log(a.t1),a.t1;case 39:case"end":return a.stop()}},a,null,[[1,29]])}));return function(){return a.apply(this,arguments)}}()(),function(){console.log("useApi: unmounting"),e.abort()}},[t,c]),[p,l]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=Object(n.useState)(e),t=Object(o.a)(a,2),r=t[0],s=t[1],c=g(),l=Object(o.a)(c,2),i=l[0],u=l[1],m="https://musicbrainz.org/ws/2/";return Object(n.useEffect)(function(){var e=new URLSearchParams;e.append("fmt","json");r&&function(){switch(r.type){case"album":e.append("inc","artists+releases+genres"),u(m+"release-group/".concat(r.id,"?")+e);break;case"artist":u(m+"artist/".concat(r.id,"?")+e);break;case"release":e.append("inc","collections+labels+recordings+url-rels+genres+artist-rels+mediums"),u(m+"release/".concat(r.id,"?")+e);break;case"cover":u("https://coverartarchive.org/release-group/"+r.id);break;default:throw console.log("useEntity: Errored!",r),new Error}}()&&console.log("CALLED LOADENTITY")},[r,u]),[i,u,s]},b=g,E=t(12),f=t.n(E),v=t(13),h=t.n(v),w="https://coverartarchive.org/release-group/";function j(e){var a=e.album,t=b(),s=Object(o.a)(t,2),c=s[0],l=s[1],i=p(),u=Object(o.a)(i,3),m=u[0],d=u[1],g=u[2],E=h()(a["first-release-date"]).format("MMMM DD, YYYY"),v=a["artist-credit"][0],j=a.genres,O=a.releases.find(function(e){return"US"===e.country&&"Official"===e.status}).id||a.releases.find(function(e){return"Official"===e.status}).id;return Object(n.useEffect)(function(){l(w+a.id),g({type:"release",id:O}),c.isLoading||c.isError||(document.body.style.backgroundImage="url("+c.data.images[0].image+")")},[a.id,a.releases,c,m,O,l,g,d]),console.log(m),console.log("album",a),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement("title",null,v.name," - ",a.title)),r.a.createElement("div",{className:"row cardcont nopadding"},r.a.createElement("div",{className:"poster-container nopadding col-md-5"},!c.isError&&!c.isLoading&&r.a.createElement("img",{id:"postertest",alt:"covert art",className:"poster",src:c.data.images[0].image})),r.a.createElement("div",{className:"meta-data-container col-md-7"},r.a.createElement("h1",{id:"title"},a.title),r.a.createElement("span",{className:"tagline"},v.name),r.a.createElement("p",null,E),r.a.createElement("div",{className:"additional-details"},r.a.createElement("span",{className:"genre-list"},j.map(function(e){return e.name.toUpperCase()}).join(", ")),r.a.createElement("span",{className:"production-list"},a["primary-type"]),r.a.createElement("div",{className:"row nopadding release-details mb-2"},r.a.createElement("div",{className:"col"},"Original Release:",r.a.createElement("span",{className:"meta-data"},E)),r.a.createElement("div",{className:"col"},"Running Time:",r.a.createElement("span",{className:"meta-data"},!m.isLoading&&N(m.data.media[0].tracks.reduce(function(e,a){return e+a.length},0))," ","mins"))),r.a.createElement("div",{className:"row nopadding release-details"},r.a.createElement("div",{className:"col"},"Box Office: ",r.a.createElement("span",{className:"meta-data"},a.title)),r.a.createElement("div",{className:"col"},"Vote Average: ",r.a.createElement("span",{className:"meta-data"},a.title)))))),r.a.createElement("div",{className:"row cardcont"},r.a.createElement("div",{className:"meta-data-container col"},!m.isLoading&&m.data.media[0].tracks.map(function(e,a){return r.a.createElement("div",{className:"row justify-content-between mb-3 align-items-baseline"},r.a.createElement("span",{className:"meta-data col-lg-8"},a+1+". "+e.title),r.a.createElement("span",{className:"col-lg-4 text-right"},N(e.length)))}))))}function N(e){var a=Math.floor(e/6e4),t=(e%6e4/1e3).toFixed(0);return a+":"+(t<10?"0":"")+t}var O=t(14),y=t.n(O),k=[{name:"C",year:1972},{name:"Elm",year:2012}],S=function(e){var a=e.trim().toLowerCase(),t=a.length;return 0===t?[]:k.filter(function(e){return e.name.toLowerCase().slice(0,t)===a})},x=function(e){return e.name},L=function(e){return r.a.createElement("div",null,e.name)};function C(){var e=Object(n.useState)(""),a=Object(o.a)(e,2),t=a[0],s=a[1],c=Object(n.useState)([]),l=Object(o.a)(c,2),i=l[0],u=l[1],m={placeholder:"Search for music...",value:t,onChange:function(e,a){var t=a.newValue;s(t)}};return r.a.createElement("div",{className:"col-xs-12 search-container nopadding "},r.a.createElement("div",{className:"row align-items-baseline"},r.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-5"},r.a.createElement("a",{title:"ReactJS MusicBrainz Music Search"},r.a.createElement("span",{className:"logo"},"musicdb"))),r.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-7"},r.a.createElement(y.a,{className:"searchbox__input typeahead form-control",suggestions:i,onSuggestionsFetchRequested:function(e){var a=e.value;u(S(a))},onSuggestionsClearRequested:function(){u([])},getSuggestionValue:x,renderSuggestion:L,inputProps:m}))))}t(44);var F="https://musicbrainz.org/ws/2/";Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(function(){var e=Object(n.useState)({type:"album",id:"2a0981fb-9593-3019-864b-ce934d97a16e"}),a=Object(o.a)(e,2),t=a[0],s=(a[1],b()),c=Object(o.a)(s,2),l=c[0],i=c[1],u=b(),m=Object(o.a)(u,2);return m[0],m[1],Object(n.useEffect)(function(){var e=new URLSearchParams;switch(e.append("fmt","json"),t.type){case"album":e.append("inc","artists+releases+genres"),i(F+"release-group/".concat(t.id,"?")+e);break;case"artist":i(F+"artist/".concat(t.id,"?")+e);break;default:throw new Error}},[t.id,t.type,i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),l.isLoading?r.a.createElement("p",{style:{color:"blue"}},"Loading..."):l.isError?r.a.createElement("p",{style:{color:"red"}},"Errored!"):r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{album:l.data})))},null),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.1300bf24.chunk.js.map