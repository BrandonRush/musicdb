(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,a,t){e.exports=t(45)},20:function(e,a,t){},44:function(e,a,t){},45:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(10),c=t.n(s),o=(t(20),t(1)),l=(t(21),t(7)),i=t.n(l),u=t(11),d=t(4),m=function(e,a){switch(a.type){case"FETCH_INIT":return Object(d.a)({},e,{isLoading:!0,isError:!1});case"FETCH_FAIL":return Object(d.a)({},e,{isLoading:!1,isError:!0});case"FETCH_SUCCESS":return Object(d.a)({},e,{data:a.payload,isLoading:!1,isError:!1});default:throw console.log(e,a),new Error}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"json",r=Object(n.useState)(e),s=Object(o.a)(r,2),c=s[0],l=s[1],d=Object(n.useReducer)(m,{data:a,isLoading:!0,isError:!1}),g=Object(o.a)(d,2),p=g[0],b=g[1];return Object(n.useEffect)(function(){var e=new AbortController;return c&&function(){var a=Object(u.a)(i.a.mark(function a(){var n,r;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b({type:"FETCH_INIT"}),a.prev=1,a.next=4,fetch(c,{signal:e.signal});case 4:n=a.sent,a.t0=t,a.next="json"===a.t0?8:"text"===a.t0?12:"blob"===a.t0?16:20;break;case 8:return a.next=10,n.json();case 10:return r=a.sent,a.abrupt("break",25);case 12:return a.next=14,n.text();case 14:return r=a.sent,a.abrupt("break",25);case 16:return a.next=18,n.blob();case 18:return r=a.sent,a.abrupt("break",25);case 20:return console.log("default triggered"),a.next=23,n.json();case 23:return r=a.sent,a.abrupt("break",25);case 25:console.log("useApi: got response"),b({type:"FETCH_SUCCESS",payload:r}),a.next=39;break;case 29:if(a.prev=29,a.t1=a.catch(1),b({type:"FETCH_FAIL"}),"AbortError"!==a.t1.name){a.next=37;break}console.log(a.t1),console.log("useApi: caught abort"),a.next=39;break;case 37:throw console.log(a.t1),a.t1;case 39:case"end":return a.stop()}},a,null,[[1,29]])}));return function(){return a.apply(this,arguments)}}()(),function(){console.log("useApi: unmounting"),e.abort()}},[t,c]),[p,l]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=Object(n.useState)(e),t=Object(o.a)(a,2),r=t[0],s=t[1],c=g(),l=Object(o.a)(c,2),i=l[0],u=l[1],d="https://musicbrainz.org/ws/2/";return Object(n.useEffect)(function(){var e=new URLSearchParams;e.append("fmt","json");r&&function(){switch(r.type){case"album":e.append("inc","artists+releases+genres"),u(d+"release-group/".concat(r.id,"?")+e);break;case"artist":u(d+"artist/".concat(r.id,"?")+e);break;case"release":e.append("inc","collections+labels+recordings+url-rels+genres+artist-rels+mediums"),u(d+"release/".concat(r.id,"?")+e);break;case"cover":u("https://coverartarchive.org/release-group/"+r.id);break;default:throw console.log("useEntity: Errored!",r),new Error}}()&&console.log("CALLED LOADENTITY")},[r,u]),[i,u,s]},b=g,f=t(12),E=t.n(f),v=t(13),h=t.n(v),w="https://coverartarchive.org/release-group/";function j(e){var a=e.album,t=b(),s=Object(o.a)(t,2),c=s[0],l=s[1],i=p(),u=Object(o.a)(i,3),d=u[0],m=u[1],g=u[2],f=h()(a["first-release-date"]).format("MMMM DD, YYYY"),v=a["artist-credit"][0],j=a.genres,N=a.releases.find(function(e){return"US"===e.country&&"Official"===e.status}).id||a.releases.find(function(e){return"Official"===e.status}).id;return Object(n.useEffect)(function(){l(w+a.id),g({type:"release",id:N}),c.isLoading||c.isError||(document.body.style.backgroundImage="url("+c.data.images[0].image+")")},[a.id,a.releases,c,d,N,l,g,m]),console.log(d),console.log("album",a),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement("title",null,v.name," - ",a.title)),r.a.createElement("div",{className:"row cardcont nopadding"},r.a.createElement("div",{className:"poster-container nopadding col-md-5"},!c.isError&&!c.isLoading&&r.a.createElement("img",{id:"postertest",alt:"covert art",className:"poster",src:c.data.images[0].image})),r.a.createElement("div",{className:"meta-data-container col-md-7"},r.a.createElement("h1",{id:"title"},a.title),r.a.createElement("span",{className:"tagline"},v.name),r.a.createElement("p",null,f),r.a.createElement("div",{className:"additional-details"},r.a.createElement("span",{className:"genre-list"},j.map(function(e){return e.name.toUpperCase()}).join(", ")),r.a.createElement("br",null),r.a.createElement("div",{className:"row nopadding release-details mb-2"},r.a.createElement("div",{className:"col"},"Original Release:",r.a.createElement("span",{className:"meta-data"},f)),r.a.createElement("div",{className:"col"},"Running Time:",r.a.createElement("span",{className:"meta-data"},!d.isLoading&&O(d.data.media[0].tracks.reduce(function(e,a){return e+a.length},0))," ","mins")))))),r.a.createElement("div",{className:"row cardcont"},r.a.createElement("div",{className:"meta-data-container col"},!d.isLoading&&d.data.media[0].tracks.map(function(e,a){return r.a.createElement("div",{key:a,className:"row justify-content-between mb-3 align-items-baseline"},r.a.createElement("span",{className:"meta-data col-lg-8"},a+1+". "+e.title),r.a.createElement("span",{className:"col-lg-4 text-right"},O(e.length)))}))))}function O(e){var a=Math.floor(e/6e4),t=(e%6e4/1e3).toFixed(0);return a+":"+(t<10?"0":"")+t}var N=t(14),S=t.n(N),y=[{name:"Presence",artist:"Led Zeppelin",id:"42f8acce-90fc-3471-a4cd-ace1ab816276"},{name:"Aladdin Sane",artist:"David Bowie",id:"50f8710f-3ae6-319b-85a7-afe783f13449"}],k=function(e){var a=e.trim().toLowerCase(),t=a.length;return console.log("value is "+e),0===t?[]:y.filter(function(e){return e.name.toLowerCase().slice(0,t)===a})},x=function(e){return e.name},L=function(e){return r.a.createElement("div",null,e.name)};function C(e){var a=e.setAlbum,t=Object(n.useState)(""),s=Object(o.a)(t,2),c=s[0],l=s[1],i=Object(n.useState)([]),u=Object(o.a)(i,2),d=u[0],m=u[1],g={placeholder:"Search for music...",value:c,onChange:function(e,a){var t=a.newValue;l(t)}};return r.a.createElement("div",{className:"col-xs-12 search-container nopadding "},r.a.createElement("div",{className:"row align-items-baseline"},r.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-5"},r.a.createElement("a",{title:"ReactJS MusicBrainz Music Search"},r.a.createElement("span",{className:"logo"},"musicdb"))),r.a.createElement("div",{className:"col-xs-12 col-sm-6 col-lg-7"},r.a.createElement(S.a,{className:"searchbox__input typeahead form-control",suggestions:d,onSuggestionsFetchRequested:function(e){var a=e.value;m(k(a))},onSuggestionsClearRequested:function(){m([])},onSuggestionSelected:function(e,t){var n=t.suggestion;t.suggestionValue,t.suggestionIndex,t.sectionIndex,t.method;console.log("in onSuggestionSelected"),a({type:"album",id:n.id})},getSuggestionValue:x,renderSuggestion:L,inputProps:g}))))}t(44);var F="https://musicbrainz.org/ws/2/";Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(function(){var e=Object(n.useState)({type:"album",id:"2a0981fb-9593-3019-864b-ce934d97a16e"}),a=Object(o.a)(e,2),t=a[0],s=a[1],c=b(),l=Object(o.a)(c,2),i=l[0],u=l[1],d=b(),m=Object(o.a)(d,2);return m[0],m[1],Object(n.useEffect)(function(){var e=new URLSearchParams;switch(e.append("fmt","json"),t.type){case"album":e.append("inc","artists+releases+genres"),u(F+"release-group/".concat(t.id,"?")+e);break;case"artist":u(F+"artist/".concat(t.id,"?")+e);break;default:throw new Error}},[t.id,t.type,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{setAlbum:s}),i.isLoading?r.a.createElement("p",{style:{color:"blue"}},"Loading..."):i.isError?r.a.createElement("p",{style:{color:"red"}},"Errored!"):r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{album:i.data})))},null),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.7c25652c.chunk.js.map